@using Microsoft.AspNetCore.Http;
@model Serwis.Models.Domains.Product
@inject IHttpContextAccessor HttpContextAccessor;

@{
     
    var sessionForWallet = HttpContextAccessor.HttpContext?.Session.GetString("Wallet");
    decimal wallet;
    var amountOfMoney = Decimal.TryParse(sessionForWallet, out wallet) == true ? Decimal.Parse(sessionForWallet) : 0;
 }
@if(Model!= null)
{
   <table class="table">
    <thead>
        <tr>
            <th style="text-align:center;">Lp.</th>
            <th style="text-align:center;">Nazwa</th>
            <th style="text-align:center;">Podgląd</th>
            <th style="text-align:center;">Cena</th>
            <th></th>

        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:center;">1</td>
            <td style="text-align:center;">@Model.Name</td>
            <td style="text-align:center;">
                <img style="width:200px; height 140px;"
                src="~/images/@Model.ImageFileName"/>
            </td>
            <td style="text-align:center;">@Model.Price</td>
            <td style="text-align:center;">
                <button class="btn btn-success "
                onclick="PayForProduct('@Model.Price', '@amountOfMoney')">Dokonaj zakupu</button>
            </td>
        </tr>
    </tbody>
   </table>
}else{
    <table class="table">
    <thead>
        <tr>
            <th>Nazwa</th>
            <th>Podgląd</th>
            <th>Cena</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr> <td>Nie wybrano produktu</td></tr>
    </tbody>
   </table>

}
@section scripts{
    <script type="text/javascript">
         function PayForProduct(priceofProduct, wallet) {
            if (!confirm(" Czy na pewno chesz kupic te pozycje?"))
                return;
            if (priceofProduct > wallet) {
            }
        }
    </script>
}


       
